<div class="container mx-auto p-6">
  <div class="card">
    <!-- Header -->
    <div class="flex items-center justify-between mb-6">
      <div>
        <h2 class="text-2xl font-bold text-gray-800">ğŸ“… Lista de Reservas</h2>
        <p class="text-sm text-gray-600 mt-1">GestiÃ³n de todas las reservas del sistema</p>
      </div>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto" *ngIf="reservas.length > 0">
      <table mat-table [dataSource]="reservas" class="w-full">
        <!-- Fecha Column -->
        <ng-container matColumnDef="fecha">
          <th mat-header-cell *matHeaderCellDef class="font-semibold text-gray-700">Fecha</th>
          <td mat-cell *matCellDef="let reserva" class="text-gray-800">{{ reserva.fecha }}</td>
        </ng-container>

        <!-- Hora Column -->
        <ng-container matColumnDef="hora">
          <th mat-header-cell *matHeaderCellDef class="font-semibold text-gray-700">Hora</th>
          <td mat-cell *matCellDef="let reserva" class="text-gray-800 font-medium">{{ reserva.hora }}</td>
        </ng-container>

        <!-- Cliente Column -->
        <ng-container matColumnDef="cliente">
          <th mat-header-cell *matHeaderCellDef class="font-semibold text-gray-700">Cliente</th>
          <td mat-cell *matCellDef="let reserva" class="text-gray-800">
            {{ reserva.nombreCliente }} {{ reserva.apellidoCliente }}
          </td>
        </ng-container>

        <!-- Personas Column -->
        <ng-container matColumnDef="personas">
          <th mat-header-cell *matHeaderCellDef class="font-semibold text-gray-700">Personas</th>
          <td mat-cell *matCellDef="let reserva">
            <span class="badge-info">
              {{ reserva.cantidadPersonas }} {{ reserva.cantidadPersonas === 1 ? 'persona' : 'personas' }}
            </span>
          </td>
        </ng-container>

        <!-- Restaurante Column -->
        <ng-container matColumnDef="restaurante">
          <th mat-header-cell *matHeaderCellDef class="font-semibold text-gray-700">Restaurante</th>
          <td mat-cell *matCellDef="let reserva" class="text-gray-600">{{ reserva.restauranteId }}</td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef class="font-semibold text-gray-700">Estado</th>
          <td mat-cell *matCellDef="let reserva">
            <span [ngClass]="getStatusClass(reserva.status)">
              <mat-icon class="icon-sm">{{ getStatusIcon(reserva.status) }}</mat-icon>
              {{ reserva.status }}
            </span>
          </td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="font-semibold text-gray-700">Acciones</th>
          <td mat-cell *matCellDef="let reserva">
            <div class="flex items-center gap-2">
              <button 
                mat-icon-button 
                *ngIf="reserva.status === 'CONFIRMADA'"
                (click)="completeReservation(reserva.id)"
                matTooltip="Completar reserva"
                class="action-btn action-btn-enable">
                <mat-icon>check_circle</mat-icon>
              </button>
              <button 
                mat-icon-button 
                *ngIf="reserva.status === 'CONFIRMADA'"
                (click)="cancelReservation(reserva.id)"
                matTooltip="Cancelar reserva"
                class="action-btn action-btn-disable">
                <mat-icon>cancel</mat-icon>
              </button>
              <span *ngIf="reserva.status !== 'CONFIRMADA'" class="text-gray-400 text-sm">
                {{ reserva.status === 'COMPLETADA' ? 'âœ“ Completada' : 'âœ— Cancelada' }}
              </span>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-50"></tr>
      </table>
    </div>

    <!-- Empty state -->
    <div *ngIf="reservas.length === 0" class="text-center py-12">
      <mat-icon class="text-gray-300 text-6xl mb-4">event_busy</mat-icon>
      <p class="text-gray-500">No hay reservas registradas</p>
    </div>
  </div>
</div>
