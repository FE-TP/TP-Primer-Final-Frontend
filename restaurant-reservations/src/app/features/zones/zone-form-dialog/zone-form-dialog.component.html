<div class="dialog-container">
  <h2 mat-dialog-title class="text-xl font-bold text-gray-800 mb-4">
    {{ isEdit ? '✏️ Editar Zona' : '➕ Nueva Zona' }}
  </h2>

  <mat-dialog-content>
    <form [formGroup]="form" class="flex flex-col gap-4">
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Nombre de la Zona</mat-label>
        <input matInput formControlName="nombre" placeholder="Ej: Terraza">
        <mat-error *ngIf="form.get('nombre')?.hasError('required')">
          El nombre es requerido
        </mat-error>
        <mat-error *ngIf="form.get('nombre')?.hasError('minlength')">
          Mínimo 3 caracteres
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Restaurante</mat-label>
        <mat-select formControlName="restauranteId">
          <mat-option *ngFor="let restaurant of restaurants" [value]="restaurant.id">
            {{ restaurant.nombre }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="form.get('restauranteId')?.hasError('required')">
          Seleccione un restaurante
        </mat-error>
      </mat-form-field>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Horarios Disponibles</label>
        <div class="flex flex-wrap gap-2">
          <button
            type="button"
            *ngFor="let horario of availableHorarios"
            (click)="toggleHorario(horario)"
            [class]="isHorarioSelected(horario) ? 'chip-selected' : 'chip-unselected'"
            class="chip-button"
          >
            <mat-icon *ngIf="isHorarioSelected(horario)" class="icon-sm mr-1">check</mat-icon>
            {{ horario }}
          </button>
        </div>
        <p class="text-xs text-red-600 mt-2" *ngIf="selectedHorarios.length === 0">
          Seleccione al menos un horario
        </p>
      </div>

      <mat-checkbox formControlName="activa" color="primary">
        Zona activa
      </mat-checkbox>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end" class="gap-2">
    <button mat-button (click)="onCancel()" class="text-gray-600">
      Cancelar
    </button>
    <button
      mat-raised-button
      class="btn-primary"
      (click)="onSubmit()"
      [disabled]="!form.valid || selectedHorarios.length === 0"
    >
      {{ isEdit ? 'Actualizar' : 'Crear' }}
    </button>
  </mat-dialog-actions>
</div>
